# =====================================================
# Semantic Model: Project ROI Metrics
# =====================================================
# Purpose: Enable natural language queries on IT project ROI and business value
# Target Use Case: Quantifiable value tracking and ROI analysis
# =====================================================

name: project_roi_metrics

custom_instructions: >
  When analyzing IT project ROI, focus on quantifiable business value and measurable outcomes.
  ROI projections are expressed as multiples (e.g., 3.5 means 3.5:1 return).
  Healthcare is a critical business unit with high-value projects.
  Track metrics that are 'On Track' vs 'At Risk' to identify projects needing attention.
  When discussing cost reduction, show both percentage and dollar values for context.

tables:
  - name: project_roi_metrics
    description: >
      Detailed ROI metrics and success criteria for IT projects.
      Each project can have multiple metrics tracking different aspects of business value.
      Includes quantifiable targets, current progress, and projected financial returns.

    base_table:
      database: DEMO_JAM
      schema: ENGINEERING_OPS
      table: PROJECT_ROI_METRICS

    primary_key:
      columns:
        - metric_id

    dimensions:
      - name: metric_id
        synonyms:
          - "metric identifier"
          - "metric ID"
        description: Unique identifier for each ROI metric
        data_type: VARCHAR
        expr: METRIC_ID
        unique: true

      - name: project_id
        synonyms:
          - "project identifier"
          - "project code"
        description: Reference to the IT project this metric belongs to
        data_type: VARCHAR
        expr: PROJECT_ID

      - name: metric_name
        synonyms:
          - "metric"
          - "KPI"
          - "success metric"
          - "measurement"
        description: Name of the metric being tracked
        data_type: VARCHAR
        expr: METRIC_NAME

      - name: metric_type
        synonyms:
          - "type of metric"
          - "metric category"
        description: Type of business impact (Cost Reduction, Revenue Increase, Efficiency Gain, Quality Improvement)
        data_type: VARCHAR
        expr: METRIC_TYPE
        sample_values:
          - Cost Reduction
          - Revenue Increase
          - Efficiency Gain
          - Quality Improvement

      - name: metric_category
        synonyms:
          - "business category"
          - "impact area"
        description: Business category of impact (Financial, Operational, Customer, Employee)
        data_type: VARCHAR
        expr: METRIC_CATEGORY
        sample_values:
          - Financial
          - Operational
          - Customer
          - Employee

      - name: status
        synonyms:
          - "metric status"
          - "progress status"
          - "achievement status"
        description: Current status of metric achievement (On Track, At Risk, Achieved, Not Started)
        data_type: VARCHAR
        expr: STATUS
        sample_values:
          - On Track
          - At Risk
          - Achieved
          - Not Started

      - name: target_unit
        synonyms:
          - "unit of measurement"
          - "measurement unit"
        description: Unit for the metric (percent, dollars, hours, count)
        data_type: VARCHAR
        expr: TARGET_UNIT
        sample_values:
          - percent
          - dollars
          - hours
          - count

      - name: target_date
        synonyms:
          - "target completion date"
          - "goal date"
          - "milestone date"
        description: Target date for achieving the metric
        data_type: DATE
        expr: TARGET_DATE

      - name: responsible_party
        synonyms:
          - "owner"
          - "responsible person"
          - "accountable party"
        description: Person or role responsible for delivering this metric
        data_type: VARCHAR
        expr: RESPONSIBLE_PARTY

      - name: measurement_frequency
        synonyms:
          - "tracking frequency"
          - "measurement cadence"
        description: How often the metric is measured (Monthly, Quarterly, At Completion)
        data_type: VARCHAR
        expr: MEASUREMENT_FREQUENCY

    measures:
      - name: target_value
        synonyms:
          - "goal"
          - "target"
          - "objective value"
        description: Target value to achieve for this metric
        data_type: NUMBER
        expr: TARGET_VALUE

      - name: baseline_value
        synonyms:
          - "starting value"
          - "initial value"
          - "baseline"
        description: Starting baseline value before project
        data_type: NUMBER
        expr: BASELINE_VALUE

      - name: current_value
        synonyms:
          - "current progress"
          - "actual value"
          - "progress to date"
        description: Current measured value of the metric
        data_type: NUMBER
        expr: CURRENT_VALUE

      - name: roi_projection_multiple
        synonyms:
          - "ROI multiple"
          - "return on investment ratio"
          - "ROI"
        description: Projected ROI as a multiple (e.g., 3.5 means 3.5 to 1 return)
        data_type: NUMBER
        expr: ROI_PROJECTION_MULTIPLE

      - name: avg_roi_multiple
        synonyms:
          - "average ROI"
          - "mean ROI multiple"
        description: Average ROI multiple across metrics
        data_type: NUMBER
        expr: AVG(ROI_PROJECTION_MULTIPLE)

      - name: roi_projection_annual_value
        synonyms:
          - "annual ROI value"
          - "yearly return"
          - "annual business value"
          - "annual dollar value"
        description: Projected annual financial value from this metric in dollars
        data_type: NUMBER
        expr: ROI_PROJECTION_ANNUAL_VALUE

      - name: total_annual_value
        synonyms:
          - "total annual ROI"
          - "total yearly value"
          - "sum of annual value"
        description: Sum of projected annual values across metrics
        data_type: NUMBER
        expr: SUM(ROI_PROJECTION_ANNUAL_VALUE)

      - name: metric_count
        synonyms:
          - "number of metrics"
          - "count of metrics"
          - "total metrics"
        description: Count of ROI metrics
        data_type: NUMBER
        expr: COUNT(*)

      - name: percent_to_target
        synonyms:
          - "progress percentage"
          - "percent complete"
          - "achievement rate"
        description: Percentage progress from baseline to target
        data_type: NUMBER
        expr: ((CURRENT_VALUE - BASELINE_VALUE) / (TARGET_VALUE - BASELINE_VALUE)) * 100

  - name: it_projects
    description: >
      IT project portfolio for joining with ROI metrics.
      Provides project context like name, business unit, budget, and status.

    base_table:
      database: DEMO_JAM
      schema: ENGINEERING_OPS
      table: IT_PROJECTS

    primary_key:
      columns:
        - project_id

    dimensions:
      - name: project_id
        data_type: VARCHAR
        expr: PROJECT_ID
        unique: true

      - name: project_name
        synonyms:
          - "project"
          - "initiative name"
        description: Name of the IT project
        data_type: VARCHAR
        expr: PROJECT_NAME

      - name: business_unit
        synonyms:
          - "department"
          - "business unit sponsor"
          - "sponsoring unit"
        description: Business unit sponsoring the project
        data_type: VARCHAR
        expr: BUSINESS_UNIT
        sample_values:
          - Healthcare
          - Finance
          - Sales
          - Marketing
          - HR
          - Operations

      - name: project_status
        synonyms:
          - "project state"
          - "status"
        description: Current project status
        data_type: VARCHAR
        expr: STATUS

      - name: project_type
        description: Type of IT project
        data_type: VARCHAR
        expr: PROJECT_TYPE

    measures:
      - name: budget_allocated
        synonyms:
          - "project budget"
          - "allocated budget"
          - "total budget"
        description: Total budget allocated to the project
        data_type: NUMBER
        expr: BUDGET_ALLOCATED

      - name: budget_spent
        synonyms:
          - "spend to date"
          - "actual spend"
          - "money spent"
        description: Amount spent on the project to date
        data_type: NUMBER
        expr: BUDGET_SPENT

      - name: percent_complete
        synonyms:
          - "project completion"
          - "percent done"
          - "progress percentage"
        description: Percentage of project completed
        data_type: NUMBER
        expr: PERCENT_COMPLETE

relationships:
  - name: project_roi_to_project
    left_table: project_roi_metrics
    right_table: it_projects
    relationship_columns:
      - left_column: project_id
        right_column: project_id
    join_type: left_outer
    relationship_type: many_to_one

